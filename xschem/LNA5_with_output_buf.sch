v {xschem version=3.0.0 file_version=1.2 }
G {}
K {}
V {}
S {}
E {}
T {>
>
>
External} -490 -250 0 0 0.4 0.4 {}
N -190 -370 -170 -370 {
lab=GNDI}
N -170 -370 -130 -370 {
lab=GNDI}
N -190 -430 -190 -400 {
lab=n_ds1}
N -300 -370 -230 -370 {
lab=vgate1}
N -130 -370 -130 -320 {
lab=GNDI}
N -190 -340 -190 -320 {
lab=#net1}
N -190 -320 -190 -300 {
lab=#net1}
N -190 -240 -190 -220 {
lab=GNDI}
N -130 -320 -130 -220 {
lab=GNDI}
N -360 -310 -360 -290 {
lab=#net2}
N -130 -560 -130 -370 {
lab=GNDI}
N -190 -560 -130 -560 {
lab=GNDI}
N -270 -560 -230 -560 {
lab=VDDI}
N -190 -600 -90 -600 {
lab=#net3}
N -610 -430 -580 -430 {
lab=GNDI}
N -610 -430 -610 -370 {
lab=GNDI}
N -610 -370 -580 -370 {
lab=GNDI}
N -580 -400 -580 -370 {
lab=GNDI}
N -580 -520 -580 -460 {
lab=vbias1}
N -580 -490 -530 -490 {
lab=vbias1}
N -530 -490 -530 -430 {
lab=vbias1}
N -580 -370 -510 -370 {
lab=GNDI}
N -190 -600 -190 -590 {
lab=#net3}
N -190 -630 -190 -600 {
lab=#net3}
N -1240 -610 -1240 -590 {
lab=#net4}
N -190 -220 -130 -220 {
lab=GNDI}
N -1240 -330 -1240 -310 {
lab=#net5}
N -190 -220 -190 -160 {
lab=GNDI}
N -650 -590 -580 -590 {
lab=GNDI}
N -650 -590 -650 -350 {
lab=GNDI}
N -650 -350 -580 -350 {
lab=GNDI}
N -580 -590 -580 -580 {
lab=GNDI}
N 440 -330 440 -270 {
lab=#net6}
N 480 -110 480 -10 {
lab=GND}
N 440 -20 440 -10 {
lab=GND}
N 440 -340 440 -330 {
lab=#net6}
N 440 -380 440 -340 {
lab=#net6}
N 440 -500 440 -440 {
lab=#net7}
N -1240 -520 -1130 -520 {
lab=VDDI}
N -580 -370 -580 -350 {
lab=GNDI}
N -1160 -580 -1160 -520 {
lab=VDDI}
N -1160 -670 -1160 -640 {
lab=VDD}
N -90 -600 -30 -600 {
lab=#net3}
N -1330 -670 -1160 -670 {
lab=VDD}
N -1240 -530 -1240 -520 {
lab=VDDI}
N -1330 -250 -1240 -250 {
lab=GND}
N -1240 -400 -1240 -390 {
lab=GNDI}
N -1240 -400 -1130 -400 {
lab=GNDI}
N -1160 -400 -1160 -350 {
lab=GNDI}
N -1240 -250 -1160 -250 {
lab=GND}
N -1330 -410 -1330 -250 {
lab=GND}
N -1130 -520 -1110 -520 {
lab=VDDI}
N -1130 -400 -1110 -400 {
lab=GNDI}
N -190 -710 -190 -690 {
lab=VDDI}
N -1160 -290 -1160 -250 {
lab=GND}
N -1110 -520 -1100 -520 {
lab=VDDI}
N -1100 -520 -970 -520 {
lab=VDDI}
N -1110 -400 -1070 -400 {
lab=GNDI}
N -1070 -400 -930 -400 {
lab=GNDI}
N -970 -520 -930 -520 {
lab=VDDI}
N -90 -630 -90 -600 {
lab=#net3}
N -190 -710 -90 -710 {
lab=VDDI}
N -90 -710 -90 -690 {
lab=VDDI}
N -360 -290 -360 -260 {
lab=#net2}
N -1330 -670 -1330 -470 {
lab=VDD}
N -290 -710 -290 -690 {
lab=VDDI}
N -290 -710 -190 -710 {
lab=VDDI}
N -540 -430 -450 -430 {
lab=vbias1}
N -360 -370 -290 -370 {
lab=vgate1}
N -450 -430 -450 -380 {
lab=vbias1}
N -260 -310 -190 -310 {
lab=#net1}
N -450 -260 -450 -210 {
lab=#net8}
N -450 -210 -450 -200 {
lab=#net8}
N -450 -200 -360 -200 {
lab=#net8}
N -290 -560 -270 -560 {
lab=VDDI}
N -190 -470 -190 -430 {
lab=n_ds1}
N -190 -530 -190 -470 {
lab=n_ds1}
N -290 -630 -290 -560 {
lab=VDDI}
N -290 -690 -290 -630 {
lab=VDDI}
N 380 -240 400 -240 {
lab=#net9}
N 440 -10 480 -10 {
lab=GND}
N 250 -230 250 -200 {
lab=#net10}
N 250 -240 250 -230 {
lab=#net10}
N 810 -290 810 -150 {
lab=GND}
N 550 -150 810 -150 {
lab=GND}
N 440 -500 810 -500 {
lab=#net7}
N 810 -500 810 -350 {
lab=#net7}
N 390 -240 390 -180 {
lab=#net9}
N 390 -180 400 -180 {
lab=#net9}
N 440 -240 460 -240 {
lab=GND}
N 440 -150 440 -80 {
lab=#net11}
N 440 -180 480 -180 {
lab=GND}
N 480 -180 480 -110 {
lab=GND}
N 460 -240 480 -240 {
lab=GND}
N 480 -240 480 -180 {
lab=GND}
N 190 -380 190 -360 {
lab=#net12}
N 190 -380 230 -380 {
lab=#net12}
N 190 -300 190 -150 {
lab=GND}
N 190 -150 190 -140 {
lab=GND}
N 250 -240 260 -240 {
lab=#net10}
N 320 -290 320 -240 {
lab=#net13}
N 230 -380 320 -380 {
lab=#net12}
N 320 -380 320 -350 {
lab=#net12}
N 550 -150 550 -140 {
lab=GND}
N 520 -380 520 -340 {
lab=#net6}
N 520 -340 570 -340 {
lab=#net6}
N 440 -340 520 -340 {
lab=#net6}
N 520 -500 520 -440 {
lab=#net7}
N 630 -340 660 -340 {
lab=#net14}
N 660 -340 660 -260 {
lab=#net14}
N 660 -200 660 -150 {
lab=GND}
N 390 -340 440 -340 {
lab=#net6}
N 320 -240 390 -280 {
lab=#net13}
C {devices/code.sym} 1220 -840 0 0 {name=TT_MODELS only_toplevel=false
format="tcleval(@value )" value=".lib \\\\$::SKYWATER_MODELS\\\\/sky130.lib.spice tt
* .include \\\\$::PDKPATH\\\\/libs.ref/sky130_fd_sc_hvl/spice/sky130_fd_sc_hvl.spice
"}
C {devices/code_shown.sym} 1890 -630 0 0 {name=s2 only_toplevel=false value="
.subckt sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext DRAIN GATE SOURCE SUBSTRATE
X0 DRAIN GATE SOURCE SUBSTRATE sky130_fd_pr__nfet_01v8 ad=2.828e+12p pd=2.132e+07u as=4.242e+12p ps=3.198e+07u w=5.05e+06u l=150000u
X1 SOURCE SUBSTRATE SUBSTRATE SUBSTRATE sky130_fd_pr__nfet_01v8 ad=0p pd=0u as=3.03e+12p ps=2.14e+07u w=5.05e+06u l=150000u
X2 SOURCE GATE DRAIN SUBSTRATE sky130_fd_pr__nfet_01v8 ad=0p pd=0u as=0p ps=0u w=5.05e+06u l=150000u
X3 DRAIN GATE SOURCE SUBSTRATE sky130_fd_pr__nfet_01v8 ad=0p pd=0u as=0p ps=0u w=5.05e+06u l=150000u
X4 SUBSTRATE SUBSTRATE SOURCE SUBSTRATE sky130_fd_pr__nfet_01v8 ad=0p pd=0u as=0p ps=0u w=5.05e+06u l=150000u
X5 SOURCE GATE DRAIN SUBSTRATE sky130_fd_pr__nfet_01v8 ad=0p pd=0u as=0p ps=0u w=5.05e+06u l=150000u
.ends
.sp dec 1000 0.1e9 10e9 1
* .ac dec 1000 0.01e9 100e9 
.control
run
display
let z11=50*(1+s_1_1)/(1-s_1_1)
let z22=50*(1+s_2_2)/(1-s_2_2)
let S11 = S_1_1
let S21 = S_2_1
let S12 = S_1_2
let S22 = S_2_2

* Stability
let delta=S11*S22-S12*S21
let K    = (1-mag(S11)^2-mag(S22)^2+mag(delta)^2)/(2*mag(S12*S21))
let mu   = (1-mag(S11)^2)/(mag(S22-conj(S11)*delta)+mag(S21*S12))
* plot real(z11) real(z22)
* plot imag(z11) imag(z22)
plot db(S_1_1) db(S_2_2) db(S_2_1)

plot K
plot mag(delta)
plot mu
.endc
"}
C {devices/vsource.sym} -1330 -440 0 0 {name=V1 value=1.8}
C {devices/gnd.sym} -1330 -250 0 0 {name=l3 lab=GND}
C {devices/lab_wire.sym} -230 -370 0 0 {name=l8 sig_type=std_logic lab=vgate1}
C {devices/lab_wire.sym} -450 -430 0 0 {name=l9 sig_type=std_logic lab=vbias1}
C {devices/lab_wire.sym} -190 -410 0 0 {name=l10 sig_type=std_logic lab=n_ds1}
C {devices/vsource.sym} 250 -170 0 0 {name=V2 value="dc 0.9 ac 1 portnum 1 z0 50"
}
C {devices/ind.sym} -190 -270 0 0 {name=Ldeg3
m=1
value=0.6n
footprint=1206
device=inductor}
C {devices/capa.sym} -260 -340 0 0 {name=C2
m=1
value=100f

footprint=1206
device="ceramic capacitor"}
C {devices/res.sym} -450 -290 2 0 {name=R1
value=1k
footprint=1206
device=resistor
m=1}
C {devices/ind.sym} -360 -340 0 0 {name=Ldeg1
m=1
value=0.5n
footprint=1206
device=inductor}
C {devices/isource.sym} -580 -550 0 0 {name=I0 value=0.5m}
C {devices/ind.sym} -190 -660 0 0 {name=Ldeg2
m=1
value=3n
footprint=1206
device=inductor}
C {devices/nmos4.sym} -210 -370 0 0 {name=XM5 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=6}
C {devices/nmos4.sym} -560 -430 0 1 {name=XM1 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=1}
C {devices/nmos4.sym} -210 -560 0 0 {name=XM2 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=6}
C {sky130_fd_pr/cap_mim_m3_1.sym} -510 -400 0 0 {name=C7 model=cap_mim_m3_1 W=20 L=30 MF=1 spiceprefix=X}
C {devices/ind.sym} -1240 -560 0 0 {name=Ldeg5
m=1
value=2n
footprint=1206
device=inductor}
C {devices/res.sym} -1240 -640 2 0 {name=R3
value=3
footprint=1206
device=resistor
m=1}
C {devices/ind.sym} -1240 -280 0 0 {name=Ldeg6
m=1
value=2n
footprint=1206
device=inductor}
C {devices/res.sym} -1240 -360 2 0 {name=R4
value=3
footprint=1206
device=resistor
m=1}
C {devices/nmos4.sym} 420 -240 0 0 {name=XM12 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=3}
C {devices/gnd.sym} 440 -10 0 0 {name=l16 lab=GND}
C {devices/vsource.sym} 660 -230 0 0 {name=V4 value="DC 0.9 AC 0 portnum 2 z0 50"}
C {devices/ind.sym} 440 -50 0 0 {name=L1
m=1
value=1n
footprint=1206
device=inductor}
C {devices/capa.sym} 600 -340 1 0 {name=C17
m=1
value=200f
footprint=1206
device="ceramic capacitor"}
C {devices/ind.sym} 440 -410 0 0 {name=L2
m=1
value=1.4n
footprint=1206
device=inductor}
C {devices/capa.sym} 0 -600 1 0 {name=C12
m=1
value=80f
footprint=1206
device="ceramic capacitor"}
C {sky130_fd_pr/cap_mim_m3_1.sym} -1030 -430 0 0 {name=C3 model=cap_mim_m3_1 W=20 L=120 MF=1 spiceprefix=X}
C {devices/gnd.sym} -580 -350 0 0 {name=l4 lab=GNDI}
C {devices/capa.sym} -1160 -320 0 0 {name=C8
m=1
value=200f

footprint=1206
device="ceramic capacitor"}
C {devices/capa.sym} -1160 -610 0 0 {name=C19
m=1
value=200f

footprint=1206
device="ceramic capacitor"}
C {devices/lab_wire.sym} -260 -710 0 0 {name=l7 sig_type=std_logic lab=VDDI}
C {devices/lab_wire.sym} -1330 -670 0 0 {name=l14 sig_type=std_logic lab=VDD}
C {devices/lab_wire.sym} -1110 -520 0 0 {name=l1 sig_type=std_logic lab=VDDI}
C {devices/gnd.sym} -1110 -400 0 0 {name=l2 lab=GNDI}
C {devices/gnd.sym} -190 -160 0 0 {name=l15 lab=GNDI}
C {devices/res.sym} -1030 -490 2 0 {name=R2
value=5
footprint=1206
device=resistor
m=1}
C {devices/gnd.sym} 250 -140 0 0 {name=l17 lab=GND}
C {devices/capa.sym} -360 -170 0 0 {name=C5
m=1
value=1n

footprint=1206
device="ceramic capacitor"}
C {devices/capa.sym} -90 -660 0 0 {name=C4
m=1
value=150f

footprint=1206
device="ceramic capacitor"}
C {devices/ind.sym} -360 -230 0 0 {name=Ldeg4
m=1
value=1n
footprint=1206
device=inductor}
C {devices/ind.sym} -450 -350 0 0 {name=Ldeg7
m=1
value=1n
footprint=1206
device=inductor}
C {devices/ind.sym} 350 -240 1 0 {name=Ldeg8
m=1
value=3n
footprint=1206
device=inductor}
C {devices/gnd.sym} 550 -140 0 0 {name=l5 lab=GND}
C {devices/res.sym} 320 -320 2 0 {name=R5
value=2k
footprint=1206
device=resistor
m=1}
C {devices/vsource.sym} 810 -320 0 0 {name=V3 value="0.9"}
C {devices/nmos4.sym} 420 -180 0 0 {name=XM4 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=3}
C {devices/vsource.sym} 190 -330 0 0 {name=V5 value="1.2"}
C {devices/gnd.sym} 190 -140 0 0 {name=l6 lab=GND}
C {devices/capa.sym} 290 -240 1 0 {name=C1
m=1
value=1n
footprint=1206
device="ceramic capacitor"}
C {devices/capa.sym} 520 -410 2 0 {name=C6
m=1
value=500f
footprint=1206
device="ceramic capacitor"}
C {devices/res.sym} 390 -310 2 0 {name=R6
value=1k

footprint=1206
device=resistor
m=1}
