v {xschem version=3.0.0 file_version=1.2 }
G {}
K {}
V {}
S {}
E {}
T {CAPBANK 1 - SERIES
MAX VALUE: 255fF} -230 -220 0 0 0.4 0.4 {}
T {CAPBANK 2 - SHUNT
MAX VALUE: 184fF} 390 -700 0 0 0.4 0.4 {}
N 120 -370 140 -370 {
lab=#net1}
N 140 -370 180 -370 {
lab=#net1}
N 120 -430 120 -400 {
lab=n_ds1}
N 10 -370 80 -370 {
lab=vgate1}
N 810 -510 810 -490 {
lab=GND}
N 180 -370 180 -320 {
lab=#net1}
N 120 -340 120 -320 {
lab=#net2}
N 120 -320 120 -300 {
lab=#net2}
N 120 -240 120 -220 {
lab=#net1}
N 180 -320 180 -220 {
lab=#net1}
N -360 -230 -360 -200 {
lab=#net3}
N -430 -140 -430 -120 {
lab=GND}
N -430 -220 -430 -200 {
lab=#net3}
N -360 -310 -360 -290 {
lab=#net4}
N -500 -220 -500 -200 {
lab=GND}
N -500 -300 -500 -280 {
lab=#net4}
N 180 -560 180 -370 {
lab=#net1}
N 120 -560 180 -560 {
lab=#net1}
N 40 -560 80 -560 {
lab=#net5}
N -50 -560 -20 -560 {
lab=#net6}
N 60 -560 60 -540 {
lab=#net5}
N 120 -600 220 -600 {
lab=#net7}
N 790 -600 810 -600 {
lab=#net8}
N 810 -600 810 -570 {
lab=#net8}
N -360 -140 -360 -100 {
lab=#net9}
N -690 -370 -660 -370 {
lab=GND}
N -690 -370 -690 -310 {
lab=GND}
N -690 -310 -660 -310 {
lab=GND}
N -660 -340 -660 -310 {
lab=GND}
N -660 -310 -660 -280 {
lab=GND}
N -660 -460 -660 -400 {
lab=vbias1}
N -660 -430 -610 -430 {
lab=vbias1}
N -610 -430 -610 -370 {
lab=vbias1}
N -660 -310 -590 -310 {
lab=GND}
N 120 -600 120 -590 {
lab=#net7}
N 120 -630 120 -600 {
lab=#net7}
N 220 -600 360 -600 {
lab=#net7}
N 120 -530 120 -430 {
lab=n_ds1}
N 380 -310 380 -270 {
lab=GND}
N 380 -340 400 -340 {
lab=GND}
N 400 -340 400 -300 {
lab=GND}
N 380 -300 400 -300 {
lab=GND}
N 470 -250 470 -210 {
lab=GND}
N 470 -280 490 -280 {
lab=GND}
N 490 -280 490 -240 {
lab=GND}
N 470 -240 490 -240 {
lab=GND}
N 320 -280 430 -280 {
lab=#net6}
N 320 -340 340 -340 {
lab=#net6}
N 380 -400 380 -370 {
lab=#net10}
N 470 -470 470 -310 {
lab=#net11}
N 420 -220 530 -220 {
lab=#net6}
N 570 -400 570 -250 {
lab=#net12}
N 520 -160 630 -160 {
lab=GND}
N 570 -190 570 -120 {
lab=GND}
N 670 -470 670 -190 {
lab=#net13}
N 380 -270 380 -100 {
lab=GND}
N 380 -100 670 -100 {
lab=GND}
N 670 -130 670 -100 {
lab=GND}
N 570 -120 570 -100 {
lab=GND}
N 470 -210 470 -100 {
lab=GND}
N 670 -160 690 -160 {
lab=GND}
N 690 -160 690 -100 {
lab=GND}
N 670 -100 690 -100 {
lab=GND}
N 570 -220 590 -220 {
lab=GND}
N 590 -220 590 -180 {
lab=GND}
N 570 -180 590 -180 {
lab=GND}
N 320 -160 520 -160 {
lab=GND}
N 320 -220 420 -220 {
lab=#net6}
N 380 -600 380 -460 {
lab=#net7}
N 470 -600 470 -530 {
lab=#net7}
N 570 -600 570 -460 {
lab=#net7}
N 670 -600 670 -530 {
lab=#net7}
N 380 -100 380 -60 {
lab=GND}
N 320 -100 380 -100 {
lab=GND}
N -50 -710 -50 -560 {
lab=#net6}
N -620 -370 -470 -370 {
lab=vbias1}
N -410 -370 10 -370 {
lab=vgate1}
N -500 -300 -360 -300 {
lab=#net4}
N -430 -220 -360 -220 {
lab=#net3}
N 380 -600 670 -600 {
lab=#net7}
N 360 -600 380 -600 {
lab=#net7}
N -280 170 -280 210 {
lab=#net2}
N -280 140 -260 140 {
lab=GND}
N -260 140 -260 180 {
lab=GND}
N -190 230 -190 270 {
lab=#net2}
N -190 200 -170 200 {
lab=GND}
N -170 200 -170 240 {
lab=GND}
N -340 200 -230 200 {
lab=#net6}
N -340 140 -320 140 {
lab=#net6}
N -280 80 -280 110 {
lab=#net14}
N -190 10 -190 170 {
lab=#net15}
N -240 260 -130 260 {
lab=#net6}
N -90 80 -90 230 {
lab=#net16}
N -140 320 -30 320 {
lab=GND}
N -90 290 -90 360 {
lab=#net2}
N 10 10 10 290 {
lab=#net17}
N -280 210 -280 380 {
lab=#net2}
N -280 380 10 380 {
lab=#net2}
N 10 350 10 380 {
lab=#net2}
N -90 360 -90 380 {
lab=#net2}
N -190 270 -190 380 {
lab=#net2}
N 10 320 30 320 {
lab=GND}
N -90 260 -70 260 {
lab=GND}
N -70 260 -70 300 {
lab=GND}
N -340 320 -140 320 {
lab=GND}
N -340 260 -240 260 {
lab=#net6}
N -280 -120 -280 20 {
lab=vgate1}
N -190 -120 -190 -50 {
lab=vgate1}
N -90 -120 -90 20 {
lab=vgate1}
N 10 -120 10 -50 {
lab=vgate1}
N -280 -120 10 -120 {
lab=vgate1}
N -260 180 -260 410 {
lab=GND}
N -260 410 30 410 {
lab=GND}
N -70 300 -70 410 {
lab=GND}
N -170 240 -170 410 {
lab=GND}
N -260 410 -260 440 {
lab=GND}
N -280 -370 -280 -120 {
lab=vgate1}
N 30 320 30 410 {
lab=GND}
N 10 380 60 380 {
lab=#net2}
N 60 -320 60 380 {
lab=#net2}
N 60 -320 120 -320 {
lab=#net2}
N -340 410 -260 410 {
lab=GND}
N 120 -800 120 -780 {
lab=#net18}
N 120 -720 120 -690 {
lab=#net19}
N -50 -860 120 -860 {
lab=#net6}
N -50 -860 -50 -710 {
lab=#net6}
N 120 -710 230 -730 {
lab=#net19}
N 120 -220 180 -220 {
lab=#net1}
N 120 -100 120 -80 {
lab=#net20}
N 120 -20 120 20 {
lab=GND}
N 120 -220 120 -160 {
lab=#net1}
N 120 -220 170 -150 {
lab=#net1}
N -730 -530 -660 -530 {
lab=GND}
N -730 -530 -730 -290 {
lab=GND}
N -730 -290 -660 -290 {
lab=GND}
N -750 -860 -50 -860 {
lab=#net6}
N -750 -860 -750 -670 {
lab=#net6}
N 320 -160 320 -100 {
lab=GND}
N 320 -860 320 -220 {
lab=#net6}
N 120 -860 320 -860 {
lab=#net6}
N -340 320 -340 410 {
lab=GND}
N -660 -530 -660 -520 {
lab=GND}
N -340 -860 -340 260 {
lab=#net6}
N 670 -600 690 -600 {
lab=#net7}
N 750 -600 790 -600 {
lab=#net8}
N -140 -390 -140 -370 {
lab=vgate1}
N -140 -600 -140 -510 {
lab=#net7}
N -140 -600 120 -600 {
lab=#net7}
C {devices/code.sym} 1220 -840 0 0 {name=TT_MODELS only_toplevel=false
format="tcleval(@value )" value=".lib \\\\$::SKYWATER_MODELS\\\\/sky130.lib.spice tt
* .include \\\\$::PDKPATH\\\\/libs.ref/sky130_fd_sc_hvl/spice/sky130_fd_sc_hvl.spice
"}
C {devices/code_shown.sym} 1220 -640 0 0 {name=s2 only_toplevel=false value="
.subckt sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext DRAIN GATE SOURCE SUBSTRATE
X0 DRAIN GATE SOURCE SUBSTRATE sky130_fd_pr__nfet_01v8 ad=2.828e+12p pd=2.132e+07u as=4.242e+12p ps=3.198e+07u w=5.05e+06u l=150000u
X1 SOURCE SUBSTRATE SUBSTRATE SUBSTRATE sky130_fd_pr__nfet_01v8 ad=0p pd=0u as=3.03e+12p ps=2.14e+07u w=5.05e+06u l=150000u
X2 SOURCE GATE DRAIN SUBSTRATE sky130_fd_pr__nfet_01v8 ad=0p pd=0u as=0p ps=0u w=5.05e+06u l=150000u
X3 DRAIN GATE SOURCE SUBSTRATE sky130_fd_pr__nfet_01v8 ad=0p pd=0u as=0p ps=0u w=5.05e+06u l=150000u
X4 SUBSTRATE SUBSTRATE SOURCE SUBSTRATE sky130_fd_pr__nfet_01v8 ad=0p pd=0u as=0p ps=0u w=5.05e+06u l=150000u
X5 SOURCE GATE DRAIN SUBSTRATE sky130_fd_pr__nfet_01v8 ad=0p pd=0u as=0p ps=0u w=5.05e+06u l=150000u
.ends
.sp dec 1000 1e9 10e9 1
* .ac dec 1000 0.01e9 100e9 
.control
run
display

let S11 = S_1_1
let S21 = S_2_1
let S12 = S_1_2
let S22 = S_2_2

* Stability
let delta=S11*S22-S12*S21
let K    = (1-mag(S11)^2-mag(S22)^2+mag(delta)^2)/(2*mag(S12*S21))
let mu   = (1-mag(S11)^2)/(mag(S22-conj(S11)*delta)+mag(S21*S12))

let z11=50*(1+s_1_1)/(1-s_1_1)
let z22=50*(1+s_2_2)/(1-s_2_2)
plot real(z11) real(z22)
plot imag(z11) imag(z22)
plot db(S_1_1) db(S_2_2) db(S_2_1)

plot mag(delta)
plot (K)
plot (mu)
.endc
"}
C {devices/gnd.sym} 120 20 0 0 {name=l1 lab=GND}
C {devices/vsource.sym} -750 -640 0 0 {name=V1 value=1.8}
C {devices/gnd.sym} -750 -610 0 0 {name=l3 lab=GND}
C {devices/gnd.sym} -360 -40 0 0 {name=l6 lab=GND}
C {devices/lab_wire.sym} 80 -370 0 0 {name=l8 sig_type=std_logic lab=vgate1}
C {devices/lab_wire.sym} -470 -370 0 0 {name=l9 sig_type=std_logic lab=vbias1}
C {devices/lab_wire.sym} 120 -410 0 0 {name=l10 sig_type=std_logic lab=n_ds1}
C {devices/gnd.sym} 810 -490 0 0 {name=l5 lab=GND}
C {devices/vsource.sym} -360 -70 0 0 {name=V2 value="dc 0 ac 1 portnum 1 z0 50"
}
C {devices/vsource.sym} 810 -540 0 0 {name=V3 value="dc 0 ac 1 portnum 2 z0 50"
}
C {devices/ind.sym} 120 -270 0 0 {name=Ldeg3
m=1
value=0.3n
footprint=1206
device=inductor}
C {devices/capa.sym} -360 -170 0 0 {name=C2
m=1
value=1n

footprint=1206
device="ceramic capacitor"}
C {devices/res.sym} -440 -370 1 0 {name=R1
value=2k
footprint=1206
device=resistor
m=1}
C {devices/capa.sym} -430 -170 0 0 {name=C4
m=1
value=50f

footprint=1206
device="ceramic capacitor"}
C {devices/gnd.sym} -430 -120 0 0 {name=l11 lab=GND}
C {devices/ind.sym} -360 -340 0 0 {name=Ldeg1
m=1
value=2n
footprint=1206
device=inductor}
C {devices/ind.sym} -360 -260 0 0 {name=Ldeg4
m=1
value=1n
footprint=1206
device=inductor}
C {devices/capa.sym} -500 -250 0 0 {name=C6
m=1
value=50f

footprint=1206
device="ceramic capacitor"}
C {devices/gnd.sym} -500 -200 0 0 {name=l12 lab=GND}
C {devices/res.sym} 10 -560 1 0 {name=R2
value=2k
footprint=1206
device=resistor
m=1}
C {devices/gnd.sym} 60 -480 0 0 {name=l13 lab=GND}
C {devices/gnd.sym} -660 -280 0 0 {name=l4 lab=GND}
C {devices/isource.sym} -660 -490 0 0 {name=I0 value=1m}
C {devices/ind.sym} 120 -660 0 0 {name=Ldeg2
m=1
value=3n
footprint=1206
device=inductor}
C {devices/nmos4.sym} 100 -370 0 0 {name=XM5 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=6}
C {devices/nmos4.sym} -640 -370 0 1 {name=XM1 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=1}
C {devices/nmos4.sym} 100 -560 0 0 {name=XM2 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=6}
C {sky130_fd_pr/cap_mim_m3_1.sym} 380 -430 0 0 {name=C5 model=cap_mim_m3_1 W=5 L=1 MF=1 spiceprefix=X}
C {sky130_fd_pr/cap_mim_m3_1.sym} 470 -500 0 0 {name=C10 model=cap_mim_m3_1 W=5 L=2 MF=1 spiceprefix=X}
C {sky130_fd_pr/cap_mim_m3_1.sym} 570 -430 0 0 {name=C9 model=cap_mim_m3_1 W=5 L=4 MF=1 spiceprefix=X}
C {sky130_fd_pr/cap_mim_m3_1.sym} 670 -500 0 0 {name=C11 model=cap_mim_m3_1 W=5 L=8 MF=1 spiceprefix=X}
C {devices/nmos4.sym} 360 -340 0 0 {name=XM3 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=1}
C {devices/nmos4.sym} 450 -280 0 0 {name=XM4 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=1}
C {devices/nmos4.sym} 550 -220 0 0 {name=XM6 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=1}
C {devices/nmos4.sym} 650 -160 0 0 {name=XM7 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=1}
C {devices/gnd.sym} 380 -60 0 0 {name=l7 lab=GND}
C {sky130_fd_pr/cap_mim_m3_1.sym} 720 -600 1 0 {name=C12 model=cap_mim_m3_1 W=10 L=6 MF=1 spiceprefix=X}
C {sky130_fd_pr/cap_mim_m3_1.sym} 60 -510 0 0 {name=C1 model=cap_mim_m3_1 W=10 L=10 MF=1 spiceprefix=X}
C {sky130_fd_pr/cap_mim_m3_1.sym} -590 -340 0 0 {name=C7 model=cap_mim_m3_1 W=20 L=10 MF=1 spiceprefix=X}
C {sky130_fd_pr/cap_mim_m3_1.sym} -280 50 0 0 {name=C13 model=cap_mim_m3_1 W=7 L=1 MF=1 spiceprefix=X}
C {sky130_fd_pr/cap_mim_m3_1.sym} -190 -20 0 0 {name=C14 model=cap_mim_m3_1 W=7 L=2 MF=1 spiceprefix=X}
C {sky130_fd_pr/cap_mim_m3_1.sym} -90 50 0 0 {name=C15 model=cap_mim_m3_1 W=7 L=4 MF=1 spiceprefix=X}
C {sky130_fd_pr/cap_mim_m3_1.sym} 10 -20 0 0 {name=C16 model=cap_mim_m3_1 W=7 L=8 MF=1 spiceprefix=X}
C {devices/nmos4.sym} -300 140 0 0 {name=XM8 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=1}
C {devices/nmos4.sym} -210 200 0 0 {name=XM9 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=1}
C {devices/nmos4.sym} -110 260 0 0 {name=XM10 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=1}
C {devices/nmos4.sym} -10 320 0 0 {name=XM11 model=sky130_fd_pr__rf_nfet_01v8_bM04W5p00L0p15_ext w=5.05u l=0.15u m=1}
C {devices/gnd.sym} -260 440 0 0 {name=l14 lab=GND}
C {devices/ind.sym} 120 -750 0 0 {name=Ldeg5
m=1
value=2n
footprint=1206
device=inductor}
C {devices/res.sym} 120 -830 2 0 {name=R3
value=5
footprint=1206
device=resistor
m=1}
C {devices/gnd.sym} 230 -670 0 0 {name=l15 lab=GND}
C {devices/capa.sym} 230 -700 0 0 {name=C3
m=1
value=10p

footprint=1206
device="ceramic capacitor"}
C {devices/ind.sym} 120 -50 0 0 {name=Ldeg6
m=1
value=2n
footprint=1206
device=inductor}
C {devices/res.sym} 120 -130 2 0 {name=R4
value=5
footprint=1206
device=resistor
m=1}
C {devices/gnd.sym} 170 -90 0 0 {name=l2 lab=GND}
C {devices/capa.sym} 170 -120 0 0 {name=C8
m=1
value=10p

footprint=1206
device="ceramic capacitor"}
C {devices/res.sym} -140 -480 2 0 {name=R5
value=2k
footprint=1206
device=resistor
m=1}
C {sky130_fd_pr/cap_mim_m3_1.sym} -140 -420 0 0 {name=C17 model=cap_mim_m3_1 W=10 L=100 MF=1 spiceprefix=X}
